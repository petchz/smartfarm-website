(this.webpackJsonpwebsite=this.webpackJsonpwebsite||[]).push([[0],{126:function(e,t,a){},200:function(e,t,a){e.exports=a(346)},205:function(e,t,a){},346:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(53),r=a.n(l),c=(a(205),a(27)),o=a(28),s=a(29),u=a(30),m=a(32),d=a(69),h=a(47),f=a(114),b=a.n(f),p=a(34),v=a(43),g=(a(126),a(115)),E=a.n(g),y=a(360),w=a(356),O=a(359),j=a(64),k=a(357),N=a(355),S=window.liff,C="https://line-smartfarm-api.herokuapp.com",x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).register=function(e){console.log("Registering..."),e.preventDefault(),a.setState({loading:!0}),E.a.post(C+"/users",{uid:a.state.uid,name:a.state.name,tel:a.state.tel}).then((function(e){console.log(e),console.log("Register Success!"),setTimeout((function(){S.closeWindow()}),2e3)})).catch((function(e){console.log(e),console.log("Register Failed!"),a.setState({loading:!1})}))},a.changeHandler=function(e){a.setState(Object(p.a)({},e.target.name,e.target.value))},a.state={uid:"",line_pic:"",name:"",tel:"",loading:!1,visible:!1,verify:!1},a.initialize=a.initialize.bind(Object(v.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.initialize(),document.title="Register",setTimeout((function(){e.setState({visible:!0})}),500)}},{key:"initialize",value:function(){var e=this;S.init({liffId:"1653759696-vxLMYoW8"},(function(){var t;return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log("Getting UID from LIFF"),!S.isLoggedIn()){a.next=9;break}return a.next=4,b.a.awrap(S.getProfile());case 4:t=a.sent,e.setState({uid:t.userId,line_pic:t.pictureUrl}),e.verify(),a.next=10;break;case 9:S.login();case 10:case"end":return a.stop()}}))}))}},{key:"verify",value:function(){var e=this;console.log("Checking for duplicated..."),this.setState({visible:!1,verify:!1}),E.a.post(C+"/verify",{uid:this.state.uid}).then((function(t){console.log("New UID Detected!"),setTimeout((function(){e.setState({visible:!0,verify:!0})}),1e3)})).catch((function(e){console.log("Duplicated UID Detected!"),S.closeWindow()}))}},{key:"render",value:function(){return i.a.createElement("div",null,this.state.verify?i.a.createElement("div",{id:"register-form",className:"main"},i.a.createElement(y.a,{visible:this.state.visible,animation:"scale",duration:1e3},i.a.createElement(w.a,{onSubmit:this.register},i.a.createElement(O.a,{as:"h1",icon:!0,className:"prompt"},i.a.createElement(j.a,{name:"pencil alternate"}),"\u0e25\u0e07\u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e43\u0e2b\u0e21\u0e48",i.a.createElement(O.a.Subheader,{className:"subheader"},this.state.loading?"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e23\u0e2d\u0e2a\u0e31\u0e01\u0e04\u0e23\u0e39\u0e48 \u0e01\u0e33\u0e25\u0e31\u0e07\u0e1b\u0e23\u0e30\u0e21\u0e27\u0e25\u0e1c\u0e25\u0e04\u0e48\u0e30":"\u0e42\u0e1b\u0e23\u0e14\u0e01\u0e23\u0e2d\u0e01\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e23\u0e34\u0e48\u0e21\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e14\u0e49\u0e27\u0e22\u0e04\u0e48\u0e30")),i.a.createElement(w.a.Field,{required:!0},i.a.createElement("label",{className:"form-label"},"\u0e0a\u0e37\u0e48\u0e2d\u0e40\u0e01\u0e29\u0e15\u0e23\u0e01\u0e23"),i.a.createElement("input",{required:!0,className:"form-input",placeholder:"\u0e01\u0e23\u0e2d\u0e01\u0e0a\u0e37\u0e48\u0e2d\u0e17\u0e35\u0e48\u0e19\u0e35\u0e48",type:"text",name:"name",value:this.state.name,disabled:this.state.loading,onChange:this.changeHandler})),i.a.createElement(w.a.Field,{required:!0},i.a.createElement("label",{className:"form-label"},"\u0e40\u0e1a\u0e2d\u0e23\u0e4c\u0e42\u0e17\u0e23\u0e28\u0e31\u0e1e\u0e17\u0e4c"),i.a.createElement("input",{required:!0,className:"form-input",placeholder:"\u0e01\u0e23\u0e2d\u0e01\u0e40\u0e1a\u0e2d\u0e23\u0e4c\u0e42\u0e17\u0e23\u0e28\u0e31\u0e1e\u0e17\u0e4c\u0e17\u0e35\u0e48\u0e19\u0e35\u0e48",maxLength:"10",type:"tel",name:"tel",value:this.state.tel,disabled:this.state.loading,onChange:this.changeHandler})),i.a.createElement(k.a,{color:"orange",content:"\u0e25\u0e07\u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19",className:"form-btn",type:"submit",disabled:this.state.loading,loading:this.state.loading})))):i.a.createElement("div",{id:"loader",className:"main"},i.a.createElement(y.a,{visible:this.state.visible,animation:"scale",duration:1e3},i.a.createElement("div",null,i.a.createElement(N.a,{size:"massive",active:!0,indeterminate:!0,inverted:!0},i.a.createElement(O.a,{as:"h2",className:"prompt"},i.a.createElement("br",null),"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e42\u0e2b\u0e25\u0e14\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25...",i.a.createElement(O.a.Subheader,{className:"subheader"},"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e23\u0e2d\u0e2a\u0e31\u0e01\u0e04\u0e23\u0e39\u0e48\u0e04\u0e48\u0e30",i.a.createElement("span",{role:"img","aria-label":"please"}," ","\ud83e\udd7a"))))))))}}]),t}(n.Component),D=window.liff,I=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"scanCode",value:function(){D.scanCode().then((function(e){var t=JSON.stringify(e);alert(t),document.getElementById("scanCode").textContent=t,D.init({liffId:"1653759696-JeYDkn12"},(function(){}))}))}},{key:"componentDidMount",value:function(){document.title="QRScan",this.scanCode()}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("p",{id:"scanCode"}))}}]),t}(n.Component);function R(){return i.a.createElement("div",{className:"main"},i.a.createElement("div",null,i.a.createElement("br",null),i.a.createElement(d.b,{to:"/register"},"Register"),i.a.createElement("br",null)),i.a.createElement("br",null),i.a.createElement("div",null,i.a.createElement("br",null),i.a.createElement(d.b,{to:"/qrscan"},"QR"),i.a.createElement("br",null)))}var q=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement(d.a,{basename:"/smartfarm-website"},i.a.createElement(h.a,{exact:!0,path:"/",component:R}),i.a.createElement(h.a,{path:"/Register",component:x}),i.a.createElement(h.a,{path:"/QRScan",component:I}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[200,1,2]]]);
//# sourceMappingURL=main.e594739e.chunk.js.map